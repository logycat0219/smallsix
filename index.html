<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å°å…­å£¬ Â· é›™å®®åˆåƒ Â· è©³è§£</title>
    <style>
        * {
            box-sizing: border-box;
            font-family: 'Segoe UI', 'å¾®è»Ÿæ­£é»‘é«”', 'Apple LiGothic', sans-serif;
        }
        body {
            background: linear-gradient(145deg, #f7f3e6 0%, #e8e0d0 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0;
            padding: 16px;
        }
        .card {
            max-width: 820px;
            width: 100%;
            background: rgba(255, 248, 235, 0.95);
            backdrop-filter: blur(4px);
            border-radius: 40px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2), 0 6px 12px rgba(0, 0, 0, 0.1);
            padding: 32px 28px;
            border: 2px solid #dbbd9a;
            transition: all 0.2s ease;
        }
        h1 {
            text-align: center;
            font-size: 2.4rem;
            font-weight: 600;
            color: #4a2e1f;
            margin: 0 0 8px 0;
            letter-spacing: 6px;
            text-shadow: 2px 2px 0 #e9c9a9;
        }
        .subhead {
            text-align: center;
            font-size: 1.1rem;
            color: #7b5a42;
            margin-bottom: 32px;
            font-style: italic;
            border-bottom: 1px dashed #cbad84;
            padding-bottom: 12px;
        }
        .input-section {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
            gap: 16px;
            margin-bottom: 32px;
        }
        .input-group {
            flex: 1 1 100px;
            min-width: 80px;
            text-align: center;
        }
        .input-group label {
            display: block;
            font-size: 1rem;
            font-weight: 600;
            color: #5f3f28;
            margin-bottom: 6px;
            background: #e7d6bf;
            padding: 4px 12px;
            border-radius: 40px;
            letter-spacing: 1px;
        }
        .input-group input {
            width: 100%;
            padding: 16px 8px;
            font-size: 2rem;
            text-align: center;
            font-weight: 600;
            background: #fef8ed;
            border: 3px solid #bb9b77;
            border-radius: 28px;
            color: #3a281c;
            outline: none;
            transition: 0.15s;
            box-shadow: inset 2px 2px 8px rgba(0,0,0,0.05);
        }
        .input-group input:focus {
            border-color: #8b6f50;
            background: #fffcf4;
            box-shadow: 0 0 0 5px rgba(187, 155, 119, 0.3);
        }
        .input-group input[type=number]::-webkit-inner-spin-button,
        .input-group input[type=number]::-webkit-outer-spin-button {
            opacity: 0.6;
            height: 32px;
        }
        .button-section {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 18px;
            margin: 28px 0 22px;
        }
        .btn {
            background: #a58362;
            border: none;
            padding: 16px 36px;
            border-radius: 60px;
            font-size: 1.4rem;
            font-weight: 600;
            color: #fdf1e2;
            cursor: pointer;
            box-shadow: 0 8px 0 #5e3e28, 0 6px 16px rgba(0,0,0,0.2);
            transition: 0.07s ease-out;
            border: 2px solid #eecbad;
            letter-spacing: 2px;
            flex: 0 1 auto;
        }
        .btn:active {
            transform: translateY(6px);
            box-shadow: 0 2px 0 #5e3e28, 0 6px 12px rgba(0,0,0,0.2);
        }
        .btn-secondary {
            background: #b7a287;
            box-shadow: 0 6px 0 #6b4f38;
            font-size: 1.2rem;
            padding: 12px 24px;
        }
        .result-card {
            background: #eadbc8;
            border-radius: 48px;
            padding: 28px 20px;
            border: 4px solid #c9ad8a;
            box-shadow: inset 0 2px 8px #aa8b67, 0 12px 18px -8px rgba(70, 40, 20, 0.4);
        }
        .single-result {
            border-bottom: 2px dashed #b2906b;
            padding-bottom: 24px;
            margin-bottom: 16px;
        }
        .result-title {
            font-size: 1.6rem;
            font-weight: 600;
            color: #311e12;
            text-align: center;
            margin-bottom: 8px;
            background: #f7e8d4;
            display: inline-block;
            padding: 4px 32px;
            border-radius: 40px;
            letter-spacing: 2px;
            border: 2px solid #b2906b;
        }
        .result-name {
            font-size: 3.8rem;
            font-weight: 800;
            color: #422f1d;
            line-height: 1.2;
            margin: 4px 0 8px;
            text-shadow: 3px 3px 0 #dabb97;
            letter-spacing: 8px;
        }
        .basic-info {
            background: #f3e5d3;
            border-radius: 40px;
            padding: 16px 20px;
            margin: 12px 0;
            border: 2px solid #b3926e;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 16px 24px;
            font-size: 1.1rem;
            color: #2d1d0f;
        }
        .basic-info span {
            background: #dccbb4;
            padding: 4px 16px;
            border-radius: 30px;
            white-space: nowrap;
        }
        .badge {
            display: inline-block;
            padding: 4px 20px;
            border-radius: 30px;
            font-size: 1rem;
            font-weight: 700;
            margin-right: 8px;
            background: #7c5f44;
            color: #f7e5cf;
            vertical-align: middle;
        }
        .short-desc {
            font-size: 1.2rem;
            background: #fcf3e5;
            border-radius: 50px;
            padding: 12px 22px;
            border: 3px solid #b3926e;
            color: #2d1d0f;
            margin: 12px 0 10px;
            text-align: center;
        }
        .long-poem {
            background: #efddcc;
            border-radius: 36px;
            padding: 18px 22px;
            border: 3px solid #a58362;
            color: #2b1c0e;
            font-size: 1rem;
            line-height: 1.7;
            white-space: pre-line;
            text-align: center;
            box-shadow: inset 0 1px 6px #7c5f44;
            max-height: 260px;
            overflow-y: auto;
        }
        .double-result {
            margin-top: 20px;
            border-top: 2px dashed #b2906b;
            padding-top: 16px;
        }
        .double-title {
            font-size: 1.4rem;
            font-weight: 600;
            color: #3e2a19;
            background: #dccbb4;
            display: inline-block;
            padding: 4px 28px;
            border-radius: 40px;
            letter-spacing: 1px;
            margin-bottom: 16px;
        }
        .double-comb {
            font-size: 2rem;
            font-weight: 700;
            color: #532e1a;
            text-align: center;
            background: #f5e8d4;
            padding: 8px 16px;
            border-radius: 48px;
            border: 2px solid #b3926e;
            margin: 10px 0;
        }
        .double-meaning {
            font-size: 1.2rem;
            background: #f2e2ce;
            border-radius: 36px;
            padding: 18px 22px;
            border: 3px solid #a58362;
            color: #2d1d0f;
            line-height: 1.6;
            text-align: center;
            box-shadow: inset 0 1px 6px #7c5f44;
        }
        .footer-note {
            text-align: center;
            margin-top: 24px;
            color: #7a644b;
            font-size: 0.95rem;
            background: #f1e6d8;
            padding: 6px 12px;
            border-radius: 40px;
        }
        .error-message {
            color: #b13e3e;
            font-weight: 600;
            background: #ffd9b5;
            border-radius: 30px;
            padding: 12px;
            text-align: center;
            border: 2px solid #b15535;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="card">
        <h1>âš¡å°å…­å£¬Â·é›™å®®âš¡</h1>
        <div class="subhead">æœˆÂ·æ—¥Â·æ™‚ ä¸‰æ•¸ Â· è©³è§£å–®å®®å±¬æ€§èˆ‡è©©è¨£</div>

        <div class="input-section">
            <div class="input-group">
                <label>ğŸŒ™ æœˆ (æ•¸ä¸€)</label>
                <input type="number" id="num1" min="1" value="4" step="1" placeholder="æœˆ">
            </div>
            <div class="input-group">
                <label>ğŸŒ æ—¥ (æ•¸äºŒ)</label>
                <input type="number" id="num2" min="1" value="3" step="1" placeholder="æ—¥">
            </div>
            <div class="input-group">
                <label>â° æ™‚ (æ•¸ä¸‰)</label>
                <input type="number" id="num3" min="1" value="4" step="1" placeholder="æ™‚">
            </div>
        </div>

        <div class="button-section">
            <button class="btn" id="calcBtn">ğŸ”® å  åœ</button>
            <button class="btn btn-secondary" id="randomBtn">ğŸ² éš¨ æ©Ÿ</button>
        </div>

        <!-- çµæœé¡¯ç¤ºå€ -->
        <div class="result-card" id="resultCard">
            <!-- å–®å®®çµæœ (æ™‚å®®) è©³ç´°è³‡è¨Š -->
            <div class="single-result">
                <span class="result-title">ğŸ“Œ å–®å®® Â· æ™‚è¾°è½ä½</span>
                <div class="result-name" id="resultName">é€Ÿå–œ</div>
                
                <!-- äº”è¡Œã€é¡è‰²ã€æ–¹ä½ã€è‡¨ç¥ã€ä¸»æ•¸ -->
                <div class="basic-info" id="basicInfo">
                    <span>äº”è¡Œï¼šç«</span>
                    <span>é¡è‰²ï¼šç´…è‰²</span>
                    <span>æ–¹ä½ï¼šå—æ–¹</span>
                    <span>è‡¨ç¥ï¼šæœ±é›€</span>
                    <span>ä¸»æ•¸ï¼šä¸‰ã€å…­ã€ä¹</span>
                </div>

                <!-- å‰å‡¶æ¨™ç±¤ + ç°¡è¦èªªæ˜ (åŸæœ¬çš„çŸ­æè¿°) -->
                <div class="short-desc" id="shortDesc">
                    <span class="badge">ğŸŸ¢ å‰</span> äººä¾¿è‡³æ™‚ Â· ä¸»å–œäº‹å°‡è¿‘ï¼Œè¿…é€Ÿå¦‚æ„ã€‚
                </div>

                <!-- å‚³çµ±æ–·äº‹é•·è©© -->
                <div class="long-poem" id="longPoem">
                    é€Ÿå–œå–œè‡¨é„‰ï¼Œæ±‚è²¡å¾€å—æ–¹ï¼Œå¤±ç‰©ç”³åˆæœªï¼Œé€¢äººè·¯å°‹è©³ï¼Œ<br>
                    å®˜äº‹æœ‰ç¦å¾·ï¼Œç—…è€…ç„¡å¤§å‚·ã€‚å…­ç•œç”°ç¨¼æ…¶ï¼Œè¡Œäººæœ‰éŸ³å‘ï¼Œ<br>
                    ä¸Ÿå¤±å¾—éŸ³ä¿¡ï¼Œå¾®æ¨‚åœ¨é¢ä¸Šï¼Œå‡ºè¡Œé‡å‰åˆ©ï¼Œå°å–œè€Œé †ç•¶ã€‚<br>
                    è¾¦äº‹å¦‚é€¢æ˜¥ï¼Œå‰åˆ©åˆæ¦®å…‰ï¼Œå°é‡å¯æ±‚å€Ÿï¼Œå¤§äº‹é›£å…¨å¼·ï¼Œ<br>
                    ä¹…ç—…è¦‹å°æ„ˆï¼Œå¾—ç—…é€Ÿå›åº·ï¼Œå°‹äººå¾—çŸ¥è¦‹ï¼Œå£èˆŒè¦‹æ¶ˆäº¡ï¼Œ<br>
                    äº¤æ˜“å¯å¾—æˆï¼Œä½†ä¸å¤ªä¹…é•·ï¼Œæ±‚è²¡æœ‰ååˆ†ï¼Œå‰æ™‚å¾—é †ç•¶ã€‚
                </div>
            </div>

            <!-- é›™å®®çµæœ (æ—¥å®® + æ™‚å®®) -->
            <div class="double-result">
                <div style="text-align: center;">
                    <span class="double-title">âš–ï¸ é›™å®®æ–·äº‹ (æ—¥ + æ™‚)</span>
                </div>
                <div class="double-comb" id="doubleComb">ç©ºäº¡ + é€Ÿå–œ</div>
                <div class="double-meaning" id="doubleMeaning">
                    äº‹äº‹æ€¨è‡ªå·±ï¼Œå©šå§»æœ‰ä¸€å®šï¼Œå¤±ç‰©åœ¨å®¶è£¡ã€‚
                </div>
            </div>
        </div>

        <div class="footer-note">
            â³ å¾å¤§å®‰èµ·æ•¸ Â· æœˆâ†’æ—¥â†’æ™‚ Â· é›™å®®åˆåƒæ›´ç²¾æº–
        </div>
    </div>

    <script>
        (function() {
            // ---------- å…­å®®å®Œæ•´è³‡æ–™ ----------
            const GUA_LIST = [
                { 
                    name: 'å¤§å®‰', luck: 'å‰', element: 'æœ¨', color: 'é’è‰²', direction: 'æ±æ–¹', deity: 'é’é¾', mainNumbers: 'ä¸€ã€äº”ã€ä¸ƒ',
                    shortDesc: 'èº«ä¸å‹•æ™‚ Â· ä¸»å¹³å®‰é †åˆ©ï¼Œå®œéœä¸å®œå‹•ã€‚',
                    longPoem: `å¤§å®‰äº‹äº‹æ˜Œï¼Œæ±‚è²¡åœ¨å¤æ–¹ï¼Œå¤±ç‰©å»ä¸é ï¼Œå®…èˆä¿å®‰åº·ï¼Œ
è¡Œäººèº«æœªå‹•ï¼Œç—…è€…ä¸»ç„¡å¦¨ã€‚å°‡è»å›ç”°é‡ï¼Œä»”ç´°èˆ‡æ¨è©³ï¼Œ
ä¸Ÿå¤±åœ¨é™„è¿‘ï¼Œå¯èƒ½è¥¿å—å‘ï¼Œå®‰å±…å¾—å‰æ—¥ï¼Œä¸å¯å‹•èº«ç¥¥ã€‚
è¾¦äº‹åˆ¥å‡ºå±‹ï¼Œæ±‚å€Ÿé‚€è‡ªæˆ¿ï¼Œå¾—ç—…å…‡åŒ–å‰ï¼Œä¹…ç–¾å¾—å®‰åº·ï¼Œ
å°‹äººçŸ¥éŸ³ä¿¡ï¼Œå¯èƒ½æ­¸æ‘èŠã€‚å£èˆŒèƒ½æ¶ˆæ•£ï¼Œé è¡Œè¦æé˜²ï¼Œ
äº¤æ˜“åˆ¥å‡ºæ‘ï¼Œé›¢å±¯ç´°æ¨è©³ï¼Œæ±‚è²¡æœ‰å…«åˆ†ï¼Œå¾—å…¨ä¸å‡ºæˆ¿ã€‚`
                },
                { 
                    name: 'ç•™é€£', luck: 'å‡¶', element: 'æ°´', color: 'é»‘è‰²', direction: 'åŒ—æ–¹', deity: 'ç„æ­¦', mainNumbers: 'äºŒã€å…«ã€å',
                    shortDesc: 'å’æœªæ­¸æ™‚ Â· ä¸»æ‹–å»¶åè¦†ï¼Œäº‹é›£æˆå°±ã€‚',
                    longPoem: `ç•™é€£äº‹æœªç•¶ï¼Œæ±‚äº‹æ—¥è«å…‰ï¼Œå‡¡äº‹åªå®œç·©ï¼Œå»è€…æœªè¿´å‘ï¼Œ
å¤±ç‰©å—æ–¹å»ï¼Œæ€¥æ€¥è¡Œä¾¿è¨ªã€‚ç·Šè¨˜é˜²å£èˆŒï¼Œäººå£ä¸”å¹³ç¥¥ï¼Œ
ä¸Ÿå¤±é›£å°‹æ‰¾ï¼Œç«Šè€…åˆè½‰å ´ï¼Œå‡ºè¡Œå®šä¸æ­¸ï¼Œä¹…å»æ‹–å»¶é•·ã€‚
è¾¦äº‹ä¸æœæ–·ï¼Œç‰½é€£åˆè¿”å¾€ï¼Œæ±‚å€Ÿä¸æ˜“æˆï¼Œè¢«æ±‚è€Œå¾¬å¾¨ï¼Œ
æ­¤æ—¥æ‚£ç–¾ç—…ï¼Œå¹¾å¤©ä¸å¾©åº·ã€‚æ‰¾äººè¿·éœ§ä¸­ï¼Œè¿·è¿·åˆææƒšï¼Œ
å£èˆŒç¹¼çºŒæœ‰ï¼Œæ‹–æ‹‰åˆä¼¸é•·ï¼Œå¥³æ–¹å«å‰æ—¥ï¼Œæ±‚è²¡å…­åˆ†é‡ã€‚`
                },
                { 
                    name: 'é€Ÿå–œ', luck: 'å‰', element: 'ç«', color: 'ç´…è‰²', direction: 'å—æ–¹', deity: 'æœ±é›€', mainNumbers: 'ä¸‰ã€å…­ã€ä¹',
                    shortDesc: 'äººä¾¿è‡³æ™‚ Â· ä¸»å–œäº‹å°‡è¿‘ï¼Œè¿…é€Ÿå¦‚æ„ã€‚',
                    longPoem: `é€Ÿå–œå–œè‡¨é„‰ï¼Œæ±‚è²¡å¾€å—æ–¹ï¼Œå¤±ç‰©ç”³åˆæœªï¼Œé€¢äººè·¯å°‹è©³ï¼Œ
å®˜äº‹æœ‰ç¦å¾·ï¼Œç—…è€…ç„¡å¤§å‚·ã€‚å…­ç•œç”°ç¨¼æ…¶ï¼Œè¡Œäººæœ‰éŸ³å‘ï¼Œ
ä¸Ÿå¤±å¾—éŸ³ä¿¡ï¼Œå¾®æ¨‚åœ¨é¢ä¸Šï¼Œå‡ºè¡Œé‡å‰åˆ©ï¼Œå°å–œè€Œé †ç•¶ã€‚
è¾¦äº‹å¦‚é€¢æ˜¥ï¼Œå‰åˆ©åˆæ¦®å…‰ï¼Œå°é‡å¯æ±‚å€Ÿï¼Œå¤§äº‹é›£å…¨å¼·ï¼Œ
ä¹…ç—…è¦‹å°æ„ˆï¼Œå¾—ç—…é€Ÿå›åº·ï¼Œå°‹äººå¾—çŸ¥è¦‹ï¼Œå£èˆŒè¦‹æ¶ˆäº¡ï¼Œ
äº¤æ˜“å¯å¾—æˆï¼Œä½†ä¸å¤ªä¹…é•·ï¼Œæ±‚è²¡æœ‰ååˆ†ï¼Œå‰æ™‚å¾—é †ç•¶ã€‚`
                },
                { 
                    name: 'èµ¤å£', luck: 'å‡¶', element: 'é‡‘', color: 'ç™½è‰²', direction: 'è¥¿æ–¹', deity: 'ç™½è™', mainNumbers: 'å››ã€ä¸ƒã€å',
                    shortDesc: 'å®˜äº‹å‡¶æ™‚ Â· ä¸»å£èˆŒæ˜¯éï¼Œå®œæ…è¨€ã€‚',
                    longPoem: `èµ¤å£ä¸»å£å‚·ï¼Œå®˜äº‹ä¸”ç·Šé˜²ï¼Œå¤±ç‰©æ€¥å»æ‰¾ï¼Œè¡Œäººæœ‰é©šæ…Œï¼Œ
é›çŠ¬å¤šä½œæ€ªï¼Œç—…è€…ä¸Šè¥¿æ–¹ã€‚æ›´é ˆé˜²å’’å’€ï¼Œææ€•æŸ“ç˜Ÿæ®ƒï¼Œ
æ‰¾ç‰©çŠ¯è¬Šå£ï¼Œå°‹å•ç„¡éŸ³å‘ï¼Œå‡ºé–€åƒå£æ€¨ï¼Œè¨€è«‡è¬ç½µå‚·ã€‚
è¾¦äº‹çŠ¯å£èˆŒï¼Œé›£æˆæœ‰é˜»æ“‹ï¼Œæ±‚å€Ÿä¸å…¨é †ï¼Œé–‰å£ç„¡äº‹å¼µï¼Œ
å¾—ç—…åƒå£çŒœï¼Œæ±‚é†«é‚„ç„¡å¦¨ã€‚å°‹äººå¾—å…‡éŸ³ï¼Œäººå¿ƒä¸å®‰è©³ï¼Œ
å£èˆŒçŠ¯æœ€é‡ï¼Œäº¤æ˜“å£èˆŒé˜²ï¼Œæ±‚è²¡åªå››åˆ†ï¼Œé€¢å‰æ‰æˆç•¶ã€‚`
                },
                { 
                    name: 'å°å‰', luck: 'å‰', element: 'æœ¨', color: 'é’è‰²', direction: 'æ±æ–¹', deity: 'å…­åˆ', mainNumbers: 'ä¸€ã€äº”ã€ä¸ƒ',
                    shortDesc: 'äººä¾†å–œæ™‚ Â· ä¸»è²´äººç›¸åŠ©ï¼Œå’Œåˆå¤§å‰ã€‚',
                    longPoem: `å°å‰æœ€å‰æ˜Œï¼Œè·¯ä¸Šå¥½å•†é‡ï¼Œé™°äººä¾†å ±å–œï¼Œå¤±ç‰©åœ¨å¤æ–¹ï¼Œ
è¡Œäººç«‹åˆ»è‡³ï¼Œäº¤æ˜“ç”šæ˜¯å¼·ã€‚å‡¡äº‹çš†åˆå¥½ï¼Œç—…è€…ä¿å®‰åº·ï¼Œ
å¤§å‰åˆå¤§é †ï¼Œè¬äº‹å¦‚æ„è©³ï¼Œå‡ºè¡Œå¯å¾—å–œï¼Œåƒé‡Œå‰å®‰è©³ã€‚
è«¸äº‹å¯å¿ƒé †ï¼Œæœ‰æ†‚çš†æ¶ˆå…‰ï¼Œæ±‚å€Ÿè‡ªä¾†åŠ©ï¼Œçœ¾å‹é¡˜ç›¸å¹«ï¼Œ
é‡ç—…è«è¦æ„ï¼Œä¹…ç—…å¾—å®‰åº·ã€‚ä¸è¦‹å¾—ç›¸è¦‹ï¼Œä¸æ‰“è‡ªæ­¸èŠï¼Œ
åƒäººç¨±è®šå›ï¼Œç„¡é™ä¸Šæ¦®å…‰ï¼Œäº¤æ˜“æˆèˆˆéš†ï¼ŒåäºŒåˆ†è²¡é‡ã€‚`
                },
                { 
                    name: 'ç©ºäº¡', luck: 'å‡¶', element: 'åœŸ', color: 'é»ƒè‰²', direction: 'ä¸­å¤®', deity: 'å‹¾é™³', mainNumbers: 'ä¸‰ã€å…­ã€ä¹',
                    shortDesc: 'ä¿¡éŸ³ç¨€æ™‚ Â· ä¸»è¬€äº‹è½ç©ºï¼Œæ‰è²»å¿ƒåŠ›ã€‚',
                    longPoem: `ç©ºäº¡äº‹ä¸é•·ï¼Œé™°äººç„¡ä¸»å¼µï¼Œæ±‚è²¡å¿ƒç™½è²»ï¼Œè¡Œäººæœ‰ç½æ®ƒï¼Œ
å¤±ç‰©æ°¸ä¸è¦‹ï¼Œå®˜äº‹æœ‰åˆ‘å‚·ã€‚ç—…äººé‡é‚ªé¬¼ï¼Œä¹…ç—…æ·»ç¦æ®ƒï¼Œ
å¤±ç‰©é›£æ‰¾è¦‹ï¼Œæ‰¾å°‹ç©ºè•©ç›ªï¼Œå‡ºè¡Œä¸å‰åˆ©ï¼Œå…‡å¤šä¸å‰ç¥¥ã€‚
è¾¦äº‹å…‡ç‚ºå¤šï¼Œè™•è™•æœ‰é˜»æ“‹ï¼Œæ±‚å€Ÿä¸èƒ½æˆï¼Œæˆäº‹åŒ–æ•—å‚·ï¼Œ
å¾—ç—…å…‡å¤šå™©ï¼Œä¹…æ‚£é›ªåŠ éœœã€‚å°‹äººç„¡éŸ³ä¿¡ï¼ŒçŸ¥éŸ³è®Šç©ºæƒ³ï¼Œ
è¬å£éƒ½èª¹ç½µï¼Œå°èˆŸé­ç‹‚æµªï¼Œæ±‚è²¡æœ‰äºŒåˆ†ï¼Œä¸å‰ä¸åˆ©äº¡ã€‚`
                }
            ];

            // ----- é›™å®®æ–·è©æ˜ å°„è¡¨ (æ—¥å®®_æ™‚å®®) -----
            const DOUBLE_MEANINGS = {
                "å¤§å®‰_ç•™é€£": "è¾¦äº‹ä¸å‘¨å…¨ï¼Œå¤±ç‰©è¥¿åŒ—å»ï¼Œå©šå§»æ™šå¹¾å¤©ã€‚",
                "å¤§å®‰_é€Ÿå–œ": "è¾¦äº‹è‡ªå·±èµ·ï¼Œå¤±ç‰©ç•¶å¤©è¦‹ï¼Œå©šå§»è‡ªå·±æã€‚",
                "å¤§å®‰_èµ¤å£": "è¾¦äº‹ä¸é †æ‰‹ï¼Œå¤±ç‰©ä¸ç”¨æ‰¾ï¼Œå©šå§»å…©åˆ†æ‰‹ã€‚",
                "å¤§å®‰_å°å‰": "äº‹äº‹å¾å·±åŠï¼Œå¤±ç‰©ä¸å‡ºé–€ï¼Œå©šå§»æˆå°±åœ°ã€‚",
                "å¤§å®‰_ç©ºäº¡": "ç—…äººè¦ä¸ŠåºŠï¼Œå¤±ç‰©ç„¡è¹¤å½±ï¼Œäº‹äº‹å®œé †æƒ…ã€‚",
                "ç•™é€£_å¤§å®‰": "è¾¦äº‹å…©åˆ†å¼µï¼Œå©šå§»æœ‰å–œäº‹ï¼Œå…ˆè‹¦å¾Œä¾†ç”œã€‚",
                "ç•™é€£_é€Ÿå–œ": "äº‹äº‹ç”±è‡ªå·±ï¼Œå©šå§»æœ‰èª æ„ï¼Œå¤±ç‰©ä¸‰å¤©é‡Œã€‚",
                "ç•™é€£_èµ¤å£": "ç—…è€…æ­»äººå£ï¼Œå¤±ç‰©å‡†ä¸Ÿå¤±ï¼Œå©šå§»å…©åˆ†æ‰‹ã€‚",
                "ç•™é€£_å°å‰": "äº‹äº‹ä¸ç”¨æï¼Œå¤±ç‰©æ±å—å»ï¼Œç—…è€…å‡ºäººé½Šã€‚",
                "ç•™é€£_ç©ºäº¡": "ç—…äººå‡†æ­»äº¡ï¼Œå¤±ç‰©ä¸è¦‹é¢ï¼Œå©šå§»åˆ†å…©å¼µã€‚",
                "é€Ÿå–œ_èµ¤å£": "è‡ªå·±å¾€å¤–èµ°ï¼Œå¤±ç‰©å»æ­£åŒ—ï¼Œå©šå§»å¾—å‹¤èµ°ã€‚",
                "é€Ÿå–œ_å°å‰": "å©šå§»æœ‰äººæï¼Œç—…äººç•¶å¤©å¥½ï¼Œå¤±ç‰©åœ¨å®¶è£¡ã€‚",
                "é€Ÿå–œ_ç©ºäº¡": "å©šå§»æœ‰åˆ†å¼µï¼Œç—…äººç©æ¥µæ²»ï¼Œå¤±ç‰©ä¸ä¹…è¦‹ã€‚",
                "é€Ÿå–œ_å¤§å®‰": "äº‹äº‹éƒ½å¹³å®‰ï¼Œå©šå§»æˆå…¨äº†ï¼Œå ç—…éƒ½ç›¸å®‰ã€‚",
                "é€Ÿå–œ_ç•™é€£": "å©šå§»ä¸å¯è¨€ï¼Œå¤±ç‰©ç„¡ä¿¡æ¯ï¼Œç—…äººæœ‰ä»™ç·£ã€‚",
                "èµ¤å£_å°å‰": "è¾¦äº‹è‡ªå·±æï¼Œå©šå§»ä¸èƒ½æˆï¼Œå¤±ç‰©ç„¡ä¿¡æ¯ã€‚",
                "èµ¤å£_ç©ºäº¡": "ç„¡ç—…ä¹Ÿä¸ŠåºŠï¼Œå¤±ç‰©ä¸ç”¨æ‰¾ï¼Œå©šå§»ä¸èƒ½æˆã€‚",
                "èµ¤å£_å¤§å®‰": "è¾¦äº‹éšªå’Œé›£ï¼Œå¤±ç‰©æ±åŒ—æ‰¾ï¼Œå©šå§»æŒ‡å®šé›£ã€‚",
                "èµ¤å£_ç•™é€£": "è¾¦äº‹æœ‰å›°é›£ï¼Œè¡Œäººå¾€å¤–èµ°ï¼Œå¤±ç‰©ä¸å›é‚„ã€‚",
                "èµ¤å£_é€Ÿå–œ": "å©šå§»åœ¨è‡ªå·±ï¼Œå¤±ç‰©æœ‰è‘—è½ï¼Œè¾¦äº‹å®˜äº‹èµ·ã€‚",
                "å°å‰_ç©ºäº¡": "ç—…äººä¸å¦¥ç•¶ï¼Œå¤±ç‰©æ­£æ±æ‰¾ï¼Œå©šå§»å†æƒ³æƒ³ã€‚",
                "å°å‰_å¤§å®‰": "äº‹äº‹å…©å‘¨å…¨ï¼Œå©šå§»ç•¶æ—¥å®šï¼Œå¤±ç‰©è‡ªå·±æã€‚",
                "å°å‰_ç•™é€£": "äº‹äº‹æœ‰è¿”é‚„ï¼Œå©šå§»æœ‰äººç ´ï¼Œå¤±ç‰©ä¸Šè¥¿å—ã€‚",
                "å°å‰_é€Ÿå–œ": "äº‹äº‹å¾é ­èµ·ï¼Œå©šå§»èƒ½æˆå°±ï¼Œå¤±ç‰©åœ¨é™¢è£¡ã€‚",
                "å°å‰_èµ¤å£": "è¾¦äº‹å¾€å¤–èµ°ï¼Œå©šå§»æœ‰é›£è™•ï¼Œå¤±ç‰©ä¸Ÿäº†æ‰‹ã€‚",
                "ç©ºäº¡_å¤§å®‰": "äº‹äº‹ä¸å‘¨å…¨ï¼Œå©šå§»å¾å’Œå¥½ï¼Œå¤±ç‰©åè¦†é–“ã€‚",
                "ç©ºäº¡_ç•™é€£": "è¾¦äº‹è™•è™•é›£ï¼Œå©šå§»å¾æ–°å®šï¼Œå¤±ç‰©æ°¸ä¸é‚„ã€‚",
                "ç©ºäº¡_é€Ÿå–œ": "äº‹äº‹æ€¨è‡ªå·±ï¼Œå©šå§»æœ‰ä¸€å®šï¼Œå¤±ç‰©åœ¨å®¶è£¡ã€‚",
                "ç©ºäº¡_èµ¤å£": "è¾¦äº‹å®˜éæœ‰ï¼Œå©šå§»é›£å®šæº–ï¼Œå¤±ç‰©å¾€é èµ°ã€‚",
                "ç©ºäº¡_å°å‰": "äº‹äº‹æœ‰çŒœç–‘ï¼Œå©šå§»æœ‰å–œäº‹ï¼Œå¤±ç‰©åœ¨å®¶è£¡ã€‚"
            };

            // è¼¸å…¥æ¡†
            const num1Input = document.getElementById('num1');
            const num2Input = document.getElementById('num2');
            const num3Input = document.getElementById('num3');
            const calcBtn = document.getElementById('calcBtn');
            const randomBtn = document.getElementById('randomBtn');

            // é¡¯ç¤ºå…ƒç´ 
            const resultName = document.getElementById('resultName');
            const basicInfo = document.getElementById('basicInfo');
            const shortDesc = document.getElementById('shortDesc');
            const longPoem = document.getElementById('longPoem');
            const doubleComb = document.getElementById('doubleComb');
            const doubleMeaning = document.getElementById('doubleMeaning');

            // ----- æ ¸å¿ƒè¨ˆç®—ï¼šçµ¦ä¸‰å€‹æ­£æ•´æ•¸ï¼Œå›å‚³ [æ—¥å®®ç´¢å¼•, æ™‚å®®ç´¢å¼•] -----
            function computeIndexes(month, day, hour) {
                month = Math.max(1, Math.floor(Number(month))) || 1;
                day   = Math.max(1, Math.floor(Number(day)))   || 1;
                hour  = Math.max(1, Math.floor(Number(hour))) || 1;

                let monthIdx = (0 + month - 1) % 6;        // æœˆå®® (ä¸­é–“çµæœ)
                let dayIdx   = (monthIdx + day - 1) % 6;   // æ—¥å®®
                let hourIdx  = (dayIdx + hour - 1) % 6;    // æ™‚å®®
                return [dayIdx, hourIdx];
            }

            // ----- æ›´æ–°ç•«é¢ï¼šæ ¹æ“šæ—¥å®®ã€æ™‚å®®ç´¢å¼• -----
            function updateDisplay(dayIdx, hourIdx) {
                // æ™‚å®®è©³ç´° (å–®å®®)
                const hGua = GUA_LIST[hourIdx];
                resultName.innerText = hGua.name;

                // åŸºæœ¬è³‡è¨Šï¼šäº”è¡Œã€é¡è‰²ã€æ–¹ä½ã€è‡¨ç¥ã€ä¸»æ•¸
                basicInfo.innerHTML = `
                    <span>äº”è¡Œï¼š${hGua.element}</span>
                    <span>é¡è‰²ï¼š${hGua.color}</span>
                    <span>æ–¹ä½ï¼š${hGua.direction}</span>
                    <span>è‡¨ç¥ï¼š${hGua.deity}</span>
                    <span>ä¸»æ•¸ï¼š${hGua.mainNumbers}</span>
                `;

                // å‰å‡¶ + çŸ­æè¿°
                let luckTag = hGua.luck === 'å‰' ? 'ğŸŸ¢ å‰' : 'ğŸ”´ å‡¶';
                shortDesc.innerHTML = `<span class="badge">${luckTag}</span> ${hGua.shortDesc}`;

                // é•·è©© (ä¿ç•™åŸæœ¬æ ¼å¼)
                longPoem.innerText = hGua.longPoem;  // ä½¿ç”¨ innerText ä¿ç•™ \n æ›è¡Œï¼Œé…åˆ white-space: pre-line

                // é›™å®®éƒ¨åˆ†
                const dGua = GUA_LIST[dayIdx];
                const key = dGua.name + '_' + hGua.name;
                const doubleText = DOUBLE_MEANINGS[key];

                doubleComb.innerText = `${dGua.name} + ${hGua.name}`;
                if (doubleText) {
                    doubleMeaning.innerText = doubleText;
                } else {
                    doubleMeaning.innerText = `ï¼»æš«ç„¡å°ˆç”¨é›™å®®æ–·è©ï¼Œè«‹ç¶œåˆå–®å®®æ¶µç¾©ï¼½\næ—¥å®®${dGua.name}ï¼‹æ™‚å®®${hGua.name}ï¼Œå¯åƒè€ƒå„è‡ªå–®å®®è©©è¨£ã€‚`;
                }
            }

            // ----- å¾è¼¸å…¥æ¡†å–å€¼ï¼Œè¨ˆç®—ä¸¦æ›´æ–° -----
            function calculateFromInputs() {
                let v1 = num1Input.value.trim();
                let v2 = num2Input.value.trim();
                let v3 = num3Input.value.trim();

                if (v1 === '') v1 = '1';
                if (v2 === '') v2 = '1';
                if (v3 === '') v3 = '1';

                let n1 = Number(v1);
                let n2 = Number(v2);
                let n3 = Number(v3);

                if (isNaN(n1) || !Number.isInteger(n1) || n1 < 1 ||
                    isNaN(n2) || !Number.isInteger(n2) || n2 < 1 ||
                    isNaN(n3) || !Number.isInteger(n3) || n3 < 1) {
                    resultName.innerText = 'âš ï¸';
                    basicInfo.innerHTML = '<span>è¼¸å…¥éŒ¯èª¤</span>';
                    shortDesc.innerHTML = `<span class="badge" style="background:#b15535;">éŒ¯èª¤</span> è«‹è¼¸å…¥å¤§æ–¼æˆ–ç­‰æ–¼1çš„æ•´æ•¸ã€‚`;
                    longPoem.innerText = '';
                    doubleComb.innerText = '--';
                    doubleMeaning.innerText = 'ç„¡æ³•çµ„åˆï¼Œè«‹ä¿®æ­£è¼¸å…¥ã€‚';
                    return;
                }

                const [dayIdx, hourIdx] = computeIndexes(n1, n2, n3);
                updateDisplay(dayIdx, hourIdx);
            }

            // ----- éš¨æ©Ÿå¡«å…¥1~9çš„æ•¸å­— -----
            function setRandomNumbers() {
                const rand = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;
                num1Input.value = rand(1, 9);
                num2Input.value = rand(1, 9);
                num3Input.value = rand(1, 9);
                calculateFromInputs();
            }

            // ----- ç¶å®šäº‹ä»¶ -----
            calcBtn.addEventListener('click', function(e) {
                e.preventDefault();
                calculateFromInputs();
            });

            randomBtn.addEventListener('click', function(e) {
                e.preventDefault();
                setRandomNumbers();
            });

            [num1Input, num2Input, num3Input].forEach(input => {
                input.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        calculateFromInputs();
                    }
                });
            });

            // é é¢è¼‰å…¥æ™‚ä»¥é è¨­å€¼(4,3,4)è¨ˆç®— (å››æœˆåˆä¸‰å¯æ™‚)
            window.addEventListener('load', function() {
                calculateFromInputs();
            });
        })();
    </script>
</body>

</html>
